<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetchify Address Autocomplete Example</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="d-flex space-x-4">
        <div class="mb-4 max-w-md mx-auto bg-white p-6 rounded-lg shadow-md">
            <h1 class="text-2xl font-bold mb-4">Billing Address Lookup</h1>
            <div class="mb-4">
                <label for="lookup" class="block text-sm font-medium text-gray-700">Lookup Address</label>
                <input type="text" name="billing_lookup" id="lookup" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" placeholder="Enter postcode">
            </div>
            <div id="billing_address_fields" class="space-y-4 hidden">
                <div>
                    <label for="address_line1" class="block text-sm font-medium text-gray-700">Address Line 1</label>
                    <input type="text" id="address_line1" name="billing_address_line1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="address_line2" class="block text-sm font-medium text-gray-700">Address Line 2</label>
                    <input type="text" id="address_line2" name="billing_address_line2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="town" class="block text-sm font-medium text-gray-700">Town</label>
                    <input type="text" id="town" name="billing_town" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                    <input type="text" id="city" name="billing_city" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="postcode" class="block text-sm font-medium text-gray-700">Postcode</label>
                    <input type="text" id="postcode" name="billing_postcode" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700">Country</label>
                    <input type="text" id="country" name="billing_country" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div class="mt-4">
                    <label for="final_address" class="block text-sm font-medium text-gray-700">Final Address</label>
                    <textarea id="final_address" name="billing_final_address" rows="4" class="block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"></textarea>
                </div>
            </div>
        </div>
        
        <div class="mb-4 max-w-md mx-auto bg-white p-6 rounded-lg shadow-md">
            <h1 class="text-2xl font-bold mb-4">Shipping Address Lookup</h1>
            <div class="mb-4">
                <label for="lookup" class="block text-sm font-medium text-gray-700">Lookup Address</label>
                <input type="text" name="shipping_lookup" id="lookup" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" placeholder="Enter postcode">
            </div>
            <div id="shipping_address_fields" class="space-y-4 hidden">
                <div>
                    <label for="address_line1" class="block text-sm font-medium text-gray-700">Address Line 1</label>
                    <input type="text" id="address_line1" name="shipping_address_line1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="address_line2" class="block text-sm font-medium text-gray-700">Address Line 2</label>
                    <input type="text" id="address_line2" name="shipping_address_line2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="town" class="block text-sm font-medium text-gray-700">Town</label>
                    <input type="text" id="town" name="shipping_town" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                    <input type="text" id="city" name="shipping_city" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="postcode" class="block text-sm font-medium text-gray-700">Postcode</label>
                    <input type="text" id="postcode" name="shipping_postcode" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700">Country</label>
                    <input type="text" id="country" name="shipping_country" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                </div>
                <div class="mt-4">
                    <label for="final_address" class="block text-sm font-medium text-gray-700">Final Address</label>
                    <textarea id="final_address" name="shipping_final_address" rows="4" class="block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"></textarea>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cc-cdn.com/generic/scripts/v1/cc_c2a.min.js"></script>
    
    <script>
        // window.billing_cc_c2a = new clickToAddress({
        //     accessToken: 'MY_API_KEY', // Replace this with your access token
        //     dom: {
        //         search: 'billing_lookup', // 'search_field' is the name of the search box element
        //         line_1: 'billing_address_line1',
        //         line_2: 'billing_address_line2',
        //         town: 'billing_town',
        //         postcode: 'billing_city',
        //         county: 'billing_postcode',
        //         country: 'billing_country'
        //     },
        //     defaultCountry: 'gbr',
        //     getIpLocation: false,
        //     onResultSelected: function(c2a, elements, address){
        //         document.querySelector('#billing_address_fields').classList.remove('hidden');
        //         document.querySelector('[name="billing_final_address"]').value = JSON.stringify(address);
        //         console.log('billing address',{c2a, elements, address});
        //         // Perform any action here with the available data.
        //         // For example, you could reveal all the form fields when the fields are filled.
        //     },
        //     onError: function(code, message){
        //         console.log('billing error', {code, message});
        //         // Perform any action here with the available data.
        //         // For example, you may want to reveal the form fields if there is an error.
        //     },
        //     // domMode: 'id' // Use names to find form elements
        // });  
        
        
        window.c2aInstance = new clickToAddress({
            // accessToken: 'MY_API_KEY', // Replace this with your access token
            defaultCountry: 'gbr',
            getIpLocation: false,
            // domMode: 'id' // Use names to find form elements
        });
        window.c2aInstance.attach({
                search: 'billing_lookup', // 'search_field' is the name of the search box element
                line_1: 'billing_address_line1',
                line_2: 'billing_address_line2',
                town: 'billing_town',
                postcode: 'billing_city',
                county: 'billing_postcode',
                country: 'billing_country'
            },
            {
                onResultSelected: function(c2a, elements, address){
                    document.querySelector('#billing_address_fields').classList.remove('hidden');
                    document.querySelector('[name="billing_final_address"]').value = JSON.stringify(address);
                    console.log('billing address',{c2a, elements, address});
                    // Perform any action here with the available data.
                    // For example, you could reveal all the form fields when the fields are filled.
                },
                onError: function(code, message){
                    console.log('billing error', {code, message});
                    // Perform any action here with the available data.
                    // For example, you may want to reveal the form fields if there is an error.
                },
            }
        );                                         
        window.c2aInstance.attach({
                search: 'shipping_lookup', // 'search_field' is the name of the search box element
                line_1: 'shipping_address_line1',
                line_2: 'shipping_address_line2',
                town: 'shipping_town',
                postcode: 'shipping_city',
                county: 'shipping_postcode',
                country: 'shipping_country'
            },
            {
                onResultSelected: function(c2a, elements, address){
                    document.querySelector('#shipping_address_fields').classList.remove('hidden');
                    document.querySelector('[name="shipping_final_address"]').value = JSON.stringify(address);
                    console.log('shipping address',{c2a, elements, address});
                    // Perform any action here with the available data.
                    // For example, you could reveal all the form fields when the fields are filled.
                },
                onError: function(code, message){
                    console.log('shipping error', {code, message});
                    // Perform any action here with the available data.
                    // For example, you may want to reveal the form fields if there is an error.
                },
            }
        );
    </script>
</body>
</html>
